model Conversation {
    id   Int     @id @default(autoincrement())
    name String?

    messages Message[]
    users    User[]

    createdAt DateTime @default(now())
    updatedAt DateTime @default(now())
}

model Message {
    id      Int     @id @default(autoincrement())
    content String?
    file    String?

    conversationId Int
    conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

    userId Int
    user   User @relation(fields: [userId], references: [id])

    parentId Int?
    parent   Message?  @relation("MessageReplies", fields: [parentId], references: [id])
    replies  Message[] @relation("MessageReplies")

    createdAt DateTime @default(now())
    updatedAt DateTime @default(now())
}
